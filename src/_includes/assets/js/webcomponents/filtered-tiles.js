(()=>{function L(h,w){let b=w+":",A=window.location.hash.slice(1),f=Array.from(h.querySelectorAll("[data-tags]")),C=h.querySelector("[data-filtered-list]");function y(e){e.style.width="",e.style.height="",e.removeAttribute("data-first"),e.removeAttribute("data-shown-from-to"),e.getAnimations().forEach(r=>r.cancel())}function d(e,r=!1){let u=e==="",S=e?"#"+b+e:"",O=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(history.replaceState(void 0,"",S),sessionStorage.setItem("designHash",S),r||O||!Element.prototype.animate){f.forEach(function(t){let E=t.getAttribute("data-tags").split(","),m=t.getAttribute("aria-hidden")==="false",l=E.indexOf(e)>-1||u;t.hidden=!0;let n=()=>{t.setAttribute("aria-hidden",(!l).toString()),t.hidden=!1};r||O?requestAnimationFrame(n):n()});return}let i={duration:300,easing:getComputedStyle(f[0]).transitionTimingFunction||"ease-in-out"},c=C.getBoundingClientRect(),x=document.querySelector(".footer");C.style.setProperty("--t",`${i.duration}ms`),f.forEach(function(t){y(t);let E=t.getAttribute("data-tags").split(","),m=t.getAttribute("aria-hidden")==="false",l=E.indexOf(e)>-1||u,n=t.getBoundingClientRect();t.setAttribute("data-first",JSON.stringify(n)),t.setAttribute("data-shown-from-to",`${m?1:0},${l?1:0}`)});let $=x.offsetTop;f.forEach(function(t,E){let l=t.getAttribute("data-shown-from-to").split(",").map(n=>parseInt(n,10))[1]===1;t.setAttribute("aria-hidden",(!l).toString())});let p=x.offsetTop;f.forEach(function(t,E){let m=t.getAttribute("data-shown-from-to").split(",").map(v=>parseInt(v,10)),l=m[0]===1,n=m[1]===1,s=JSON.parse(t.getAttribute("data-first")),g=t.getBoundingClientRect(),a={},o={};l&&n?(a.transform=`translate(${s.left-g.left}px, ${s.top-g.top}px)`,o.transform="translate(0, 0)"):l&&!n?(a.transform=`translate(${s.left-c.left}px, ${s.top-c.top}px) scale(1)`,a.opacity="1",a.width=`${s.width}px`,a.height=`${s.height}px`,o.transform=`translate(${s.left-c.left}px, ${s.top-c.top}px) scale(0)`,o.opacity="0",o.width=`${s.width}px`,o.height=`${s.height}px`):!l&&n?(a.transform=`translate(${s.left-c.left}px, ${s.top-c.top}px) scale(0)`,a.opacity="0",a.width=`${g.width}px`,a.height=`${g.height}px`,o.transform="translate(0, 0) scale(1)",o.opacity="1",o.width=`${g.width}px`,o.height=`${g.height}px`):!l&&!n&&(a.transform="scale(0)",o.transform="scale(0)"),t.animate([a,o],i).addEventListener("finish",v=>y(t))});let q=p-$;x.animate([{transform:`translateY(${-1*q}px)`},{transform:"translateY(0)"}],i)}if(A.indexOf(b)===0){let e=A.slice(b.length),r=h.querySelector("#filter-"+(e||"all"));r||(e="",r=h.querySelector("#filter-all")),r.checked=!0,d(e,!0)}h.addEventListener("input",function(e){let r=e.target.closest(`[name="${w}"]`);if(!r)return;let u=r.value;d(u)})}var I=class extends HTMLElement{constructor(){super()}connectedCallback(){if(!this.querySelector("[data-filtered-tiles-template]"))throw new Error("A template must be provided to create the filter elements.");if(!this.querySelector("[data-filtered-tiles-group]"))throw new Error("A group for the items must be provided to enable filtering.");let w=this.querySelector("[data-filtered-tiles-group]");w.setAttribute("data-filtered-list",""),Array.from(w.children).forEach(i=>i.setAttribute("data-filtered-item",""));let b=this.getAttribute("filters").split(",").map(i=>i.trim().toLowerCase()),A=this.getAttribute("filter-class")||"",f=this.getAttribute("filter-legend")||"Filter",C=this.getAttribute("filter-all-label")||"All",y=this.getAttribute("input-name")||"filter",d=Object.assign(document.createElement("fieldset"),{className:"filtering"});A&&d.classList.add(A);let e=Object.assign(document.createElement("legend"),{className:"visually-hidden",innerText:f}),r=Object.assign(document.createElement("strong"),{ariaHidden:!0,className:"filtering-legend",innerText:f});d.appendChild(e),d.appendChild(r);let u=this.querySelector("[data-filtered-tiles-template]"),S=(i,c=null,x=!1)=>{let $=u.content.cloneNode(!0),p=$.querySelector("input"),q=$.querySelector("label"),t=`filter-${(c||i).toLowerCase()}`;return p.id=t,p.name=y,p.value=i||"",p.checked=x,q.setAttribute("for",t),q.innerText=c||i,$};[S("",C,!0)].concat(b.map(i=>S(i))).forEach(i=>d.appendChild(i.firstChild)),this.insertBefore(d,this.firstChild),L(this,y)}};customElements.define("filtered-tiles",I);})();
