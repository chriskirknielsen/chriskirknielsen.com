(()=>{var H=Object.defineProperty;var M=(t,s,n)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var S=(t,s,n)=>(M(t,typeof s!="symbol"?s+"":s,n),n);function d(t){return t.replace(/(‘|’)/,"'")}function q(t){switch(t){case"*":return"All";case"_fonts":return"Typeface";case"_designs":return"Design";case"_projects":return"Project";case"_pages":return"Page";case"_posts":default:return"Blogpost"}}var m=class extends HTMLElement{constructor(){super(...arguments);S(this,"hasRunOnce",!1)}connectedCallback(){let n=this.getAttribute("search-input"),A=this.querySelector("form"),L=this.querySelector(`[name="${n}"]`),i=this.querySelector("[data-results-list]"),w=this.querySelector("template"),g=this.querySelector("[data-results-count]"),c=this.querySelector("[data-results-filter]"),h=null;async function v(){return h!==null?h:fetch("/search.json").then(e=>e.json()).then(e=>(h=e,e))}let C=async()=>{let e=d(L.value.toLowerCase().trim());if(e.length<1)return;switch(e){case"11ty":e="eleventy";break;case"javascript":e="js";break}this.hasRunOnce||this.firstRunCallback(),i.innerHTML="<li>Loading\u2026</li>",c.innerHTML='<option value="*">All</option>';let l=(await v()).filter(o=>d(o.title.toLowerCase()).includes(e)||d(o.summary.toLowerCase()).includes(e)||d(o.tags.join(" ").toLowerCase()).includes(e));setTimeout(()=>{if(c.disabled=l.length===0,l.length===0){g.innerText="(0)",i.innerHTML="<li>No results found \u{1F622}</li>";return}let o=new DocumentFragment;i.innerHTML="";let E=new Set;l.forEach(r=>{let u=r.type,a=w.content.cloneNode(!0),j=a.querySelector("[data-result-type]"),x=a.querySelector('[data-result-slot="type"]'),D=a.querySelector('[data-result-slot="info"]'),y=a.querySelector("time[datetime]"),p=a.querySelector("a[href]"),T=a.querySelector('[data-result-slot="lang"]'),b=new Date(r.date).toISOString().split("T").shift(),I=q(u);E.add(u),j.setAttribute("data-result-type",u),x.innerText=`${I}`,p.setAttribute("href",r.url),p.setAttribute("hreflang",r.lang),p.innerHTML=r.title,u==="_posts"?(y.setAttribute("datetime",b),y.innerText=b,T.innerText=`(${r.lang})`):(y.hidden=!0,T.hidden=!0),o.append(a)}),g.innerText=`(${l.length})`,i.append(o),Array.from(E).sort().forEach(r=>{let u=Object.assign(document.createElement("option"),{value:r,innerText:q(r)});c.appendChild(u)})},100)};A.addEventListener("submit",function(e){return e.preventDefault(),C(),!1}),c.addEventListener("change",function(e){let f=c.value||"*";Array.from(i.querySelectorAll("[data-result-type]")).forEach(l=>{l.hidden=f!=="*"&&l.getAttribute("data-result-type")!==f})})}firstRunCallback(){Array.from(this.querySelectorAll("[data-show-on-first-run]")).forEach(n=>{n.hidden=!1}),this.hasRunOnce=!0}};customElements.define("instant-search",m);})();
